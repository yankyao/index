<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.react基础 | GGS DDU</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="GGS DDU">
    <link rel="preload" href="/index/assets/css/0.styles.5331c3bc.css" as="style"><link rel="preload" href="/index/assets/js/app.9915e749.js" as="script"><link rel="preload" href="/index/assets/js/2.6552fd95.js" as="script"><link rel="preload" href="/index/assets/js/13.36729f04.js" as="script"><link rel="prefetch" href="/index/assets/js/10.54b794c8.js"><link rel="prefetch" href="/index/assets/js/11.14c22ce7.js"><link rel="prefetch" href="/index/assets/js/12.e3224cb5.js"><link rel="prefetch" href="/index/assets/js/14.80c31306.js"><link rel="prefetch" href="/index/assets/js/15.32de8c8a.js"><link rel="prefetch" href="/index/assets/js/16.404663dd.js"><link rel="prefetch" href="/index/assets/js/17.efabd7a9.js"><link rel="prefetch" href="/index/assets/js/18.0b696e7a.js"><link rel="prefetch" href="/index/assets/js/19.048b44c9.js"><link rel="prefetch" href="/index/assets/js/20.e1b59749.js"><link rel="prefetch" href="/index/assets/js/21.9932956b.js"><link rel="prefetch" href="/index/assets/js/22.3efa7569.js"><link rel="prefetch" href="/index/assets/js/23.d90b8421.js"><link rel="prefetch" href="/index/assets/js/24.73c9aea6.js"><link rel="prefetch" href="/index/assets/js/25.d766cbc1.js"><link rel="prefetch" href="/index/assets/js/26.75e74a7a.js"><link rel="prefetch" href="/index/assets/js/27.c5d91bd4.js"><link rel="prefetch" href="/index/assets/js/28.50921aa3.js"><link rel="prefetch" href="/index/assets/js/29.06dd4398.js"><link rel="prefetch" href="/index/assets/js/3.7a5ae64e.js"><link rel="prefetch" href="/index/assets/js/30.b5057867.js"><link rel="prefetch" href="/index/assets/js/31.6f41dec4.js"><link rel="prefetch" href="/index/assets/js/32.71cee19b.js"><link rel="prefetch" href="/index/assets/js/33.7434fcd4.js"><link rel="prefetch" href="/index/assets/js/34.0d5baca1.js"><link rel="prefetch" href="/index/assets/js/35.423582c7.js"><link rel="prefetch" href="/index/assets/js/36.3b3a3740.js"><link rel="prefetch" href="/index/assets/js/37.457f484b.js"><link rel="prefetch" href="/index/assets/js/38.f5cdcf22.js"><link rel="prefetch" href="/index/assets/js/39.1b29ce18.js"><link rel="prefetch" href="/index/assets/js/4.a551fda6.js"><link rel="prefetch" href="/index/assets/js/40.da723c05.js"><link rel="prefetch" href="/index/assets/js/41.38cf67dc.js"><link rel="prefetch" href="/index/assets/js/42.64745509.js"><link rel="prefetch" href="/index/assets/js/43.08777138.js"><link rel="prefetch" href="/index/assets/js/44.a8d4bc4b.js"><link rel="prefetch" href="/index/assets/js/45.f6baf106.js"><link rel="prefetch" href="/index/assets/js/46.60ad6dec.js"><link rel="prefetch" href="/index/assets/js/47.33409ee4.js"><link rel="prefetch" href="/index/assets/js/48.fdc17f16.js"><link rel="prefetch" href="/index/assets/js/49.24ad2e90.js"><link rel="prefetch" href="/index/assets/js/5.9751f667.js"><link rel="prefetch" href="/index/assets/js/50.976ed520.js"><link rel="prefetch" href="/index/assets/js/51.76633c94.js"><link rel="prefetch" href="/index/assets/js/52.7d095590.js"><link rel="prefetch" href="/index/assets/js/53.ef65abdb.js"><link rel="prefetch" href="/index/assets/js/54.c9d8d01f.js"><link rel="prefetch" href="/index/assets/js/55.5887f80a.js"><link rel="prefetch" href="/index/assets/js/56.b38a017c.js"><link rel="prefetch" href="/index/assets/js/57.29636d08.js"><link rel="prefetch" href="/index/assets/js/58.5b98d662.js"><link rel="prefetch" href="/index/assets/js/59.8207af43.js"><link rel="prefetch" href="/index/assets/js/6.981a9465.js"><link rel="prefetch" href="/index/assets/js/60.567f44b4.js"><link rel="prefetch" href="/index/assets/js/61.6dc27254.js"><link rel="prefetch" href="/index/assets/js/62.b7ac1dd3.js"><link rel="prefetch" href="/index/assets/js/63.7b75705a.js"><link rel="prefetch" href="/index/assets/js/64.57b86c3d.js"><link rel="prefetch" href="/index/assets/js/65.79cfa2e1.js"><link rel="prefetch" href="/index/assets/js/7.c4d8d391.js"><link rel="prefetch" href="/index/assets/js/8.2758da50.js"><link rel="prefetch" href="/index/assets/js/9.648cff9b.js">
    <link rel="stylesheet" href="/index/assets/css/0.styles.5331c3bc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/index/" class="home-link router-link-active"><!----> <span class="site-name">GGS DDU</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.前后端交互</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>5.前端框架</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/index/5.前端框架/1.一些概念.html" class="sidebar-link">1.一些概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/1.一些概念.html#mvvm" class="sidebar-link">MVVM</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/1.一些概念.html#组件化" class="sidebar-link">组件化</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/1.一些概念.html#模块化开发" class="sidebar-link">模块化开发</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/1.一些概念.html#前端路由" class="sidebar-link">前端路由</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/1.一些概念.html#diff算法" class="sidebar-link">Diff算法</a></li></ul></li><li><a href="/index/5.前端框架/2.react基础.html" class="active sidebar-link">2.react基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#babel和jsx" class="sidebar-link">babel和JSX</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#起步" class="sidebar-link">起步</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#创建组件" class="sidebar-link">创建组件</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#自定义属性" class="sidebar-link">自定义属性</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#表单元素和受控组件" class="sidebar-link">表单元素和受控组件</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#数据流向" class="sidebar-link">数据流向</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#获得dom元素" class="sidebar-link">获得DOM元素</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#组件间消息的传递" class="sidebar-link">组件间消息的传递</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#组件的生命周期" class="sidebar-link">组件的生命周期</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/2.react基础.html#hooks" class="sidebar-link">Hooks</a></li></ul></li><li><a href="/index/5.前端框架/3.react源码.html" class="sidebar-link">3.react源码</a></li><li><a href="/index/5.前端框架/4.reactMVVM.html" class="sidebar-link">4.reactMVVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/4.reactMVVM.html#技术栈" class="sidebar-link">技术栈</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/4.reactMVVM.html#flux架构" class="sidebar-link">Flux架构</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/4.reactMVVM.html#redux框架" class="sidebar-link">Redux框架</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/4.reactMVVM.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/4.reactMVVM.html#react-router路由" class="sidebar-link">React-Router路由</a></li></ul></li><li><a href="/index/5.前端框架/5.vue基础.html" class="sidebar-link">5.vue基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#基本的工作机制" class="sidebar-link">基本的工作机制</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#demo" class="sidebar-link">Demo</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#实例" class="sidebar-link">实例</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#实例的生命周期" class="sidebar-link">实例的生命周期</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#数据绑定语法" class="sidebar-link">数据绑定语法</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#计算属性" class="sidebar-link">计算属性</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#样式-类名和行内样式" class="sidebar-link">样式：类名和行内样式</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#v-if指令和v-show指令" class="sidebar-link">v-if指令和v-show指令</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#v-for指令" class="sidebar-link">v-for指令</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#事件" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#v-model" class="sidebar-link">v-model</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#组件-重点" class="sidebar-link">组件(重点)</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#组件间通信" class="sidebar-link">组件间通信</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#sync" class="sidebar-link">.sync</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#自定义事件" class="sidebar-link">自定义事件</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#slot插槽" class="sidebar-link">slot插槽</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/5.vue基础.html#自定义指令、自定义过滤器" class="sidebar-link">自定义指令、自定义过滤器</a></li></ul></li><li><a href="/index/5.前端框架/6.vue源码.html" class="sidebar-link">6.vue源码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/6.vue源码.html#vue源码目录" class="sidebar-link">vue源码目录</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/6.vue源码.html#核心实现-响应式" class="sidebar-link">核心实现-响应式</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/6.vue源码.html#模版编译" class="sidebar-link">模版编译</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/6.vue源码.html#patch" class="sidebar-link">Patch</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/6.vue源码.html#vue3" class="sidebar-link">vue3</a></li></ul></li><li><a href="/index/5.前端框架/7.vueMVVM.html" class="sidebar-link">7.vueMVVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/7.vueMVVM.html#vue-router" class="sidebar-link">vue-router</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/7.vueMVVM.html#独立构建vs运行时构建" class="sidebar-link">独立构建vs运行时构建</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/7.vueMVVM.html#vuex" class="sidebar-link">Vuex</a></li></ul></li><li><a href="/index/5.前端框架/8.vueSSR.html" class="sidebar-link">8.vueSSR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/8.vueSSR.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/8.vueSSR.html#" class="sidebar-link"></a></li></ul></li><li><a href="/index/5.前端框架/9.领域分支.html" class="sidebar-link">9.领域分支</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/5.前端框架/9.领域分支.html#可视化" class="sidebar-link">可视化</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/9.领域分支.html#移动web" class="sidebar-link">移动web</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/9.领域分支.html#游戏开发" class="sidebar-link">游戏开发</a></li><li class="sidebar-sub-header"><a href="/index/5.前端框架/9.领域分支.html#便携设备" class="sidebar-link">便携设备</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.前端工程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.各种必会方案</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.必会面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>10.方法论</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-react基础"><a href="#_2-react基础" class="header-anchor">#</a> 2.react基础</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <ul><li>Angular，出自Google</li> <li>React，出自Facebook</li></ul> <p>A JAVASCRIPT LIBRARY FOR BUILDING USER INTERFACES。用来制作用户交互视图的，简单的说就是做视图组件的。
<strong>React makes it painless to create interactive UIs.
Design simple views for each state in your application,
and React will efficiently update and render just the right components when your data changes.
Declarative views make your code more predictable and easier to debug.
React制作出来的组件，和状态有关系的，当状态改变的时候，React会快速的更新、呈递界面。</strong></p> <p><strong>Build encapsulated components that manage their own state,
then compose them to make complex UIs.
Since component logic is written in JavaScript instead of templates,
you can easily pass rich data through your app and keep state out of the DOM.
React中components（组件）是最基本的单元，每个组件有自己的state（状态），
根据组件的状态React自动呈递对应的DOM。组件逻辑写在JS中的，而不是模板templates。</strong></p> <ul><li>React是一个MVVM框架。</li> <li>Angular是一个非常标准的MVC框架，有模型、视图、控制器。</li> <li>React着眼于View视图组件的创建，不是一个完整的MVC框架。目的是组件而不是单页面应用，可以使用React全家桶来做单页面应用。</li></ul> <p style="text-align:center;font-weight:700;">React知识点</p> <img src="/index/assets/img/5.2.1.33074a52.png"> <h2 id="babel和jsx"><a href="#babel和jsx" class="header-anchor">#</a> babel和JSX</h2> <p>babel是一个compiler（编译器），英语原意是噪音的意思，把噪音变为我们能听懂的声音。</p> <ul><li>ECMAScript2016 转为 ECMAScript5</li> <li>JSX 转为 JavaScript + HTML</li></ul> <p>babel可以灵活配置，使用ECMAScript2016甚至更新的语法。babel会把它编译为现在能用的JS语句。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    retuen a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
<span class="token comment">// -----编译为-----</span>
<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><p>babel即可以browser环境，也可以运行在nodejs环境:</p> <ul><li>学习React的时候一般会这么做，浏览器加载页面的时候，让babel工作，将语法进行转换。</li> <li>具体应用在生产环境，用Grunt、Webpack实时watch（监听）babel文件的改变，自动生成js文件。</li></ul> <p>需要把babel运行在前端，引用即可：</p> <p>JSX关键词：<strong>点语法、&amp;&amp;、三元表达式、Array.prototype.map方法</strong>。从本质上讲JSX，也就是所有render中的&quot;标签&quot;都只是React.createElement(component, props, ...children) 函数提供的语法糖。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'Sarah'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> displayNewHires <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>displayNewHires<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// React代码都将编译成普通的JavaScript</span>
<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'Sarah'</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> displayNewHires <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
    <span class="token string">'ul'</span><span class="token punctuation">,</span>
    <span class="token keyword">null</span><span class="token punctuation">,</span>
    names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
        <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>displayNewHires<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="起步"><a href="#起步" class="header-anchor">#</a> 起步</h2> <p>在前端学习时引入三个文件，分别是react、react-dom、browser(是babel文件)：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>statics/react.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>statics/react-dom.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>statics/browser.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- **script标签的type是text/babel** --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span> world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">,</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>JSX是一个语法糖，目的就是让HTML拥有JavaScript的作用域，这是一个React突破性的创举。JSX有两个规范：</p> <ul><li>最外层只有一个标签；</li> <li>类名用clasName；</li> <li>JS用单大括号包裹。JSX里面的JS只能放置简单的表达式，不能放置语句。比如不能放置var、function、for、if都不行！只能使用值，而不能生产值。但是可以放置三元表达式。jsx的注释的格式，{/* 注释内容 */}。</li></ul> <h2 id="创建组件"><a href="#创建组件" class="header-anchor">#</a> 创建组件</h2> <p>React就是为了创建component组件的，实际上就是自定义标签，就是Angular中的E级别的directive。</p> <blockquote><p>  注意，自定义的 React 类名以大写字母开头，比如 HelloMessage不能写成 helloMessage。除此之外还需要注意组件类只能包含一个顶层标签，否则也会报错。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// 创建组件的方法1，函数式组件，没有实例</span>
    <span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
    ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent info<span class="token operator">=</span><span class="token string">&quot;world&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用ECMAScript2016(es6)的class类创建组件： --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 创建组件的方法2</span>
    <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Componnet</span><span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>            
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用React.createClass()方法创建组件类： --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 创建组件的方法3</span>
    <span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="自定义属性"><a href="#自定义属性" class="header-anchor">#</a> 自定义属性</h2> <p>this.props，在JSX中使用this，其指向的是当前组件。props是组件函数类的属性。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>    
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent a<span class="token operator">=</span><span class="token string">'11'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent a<span class="token operator">=</span><span class="token string">'22'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>MyComponent a<span class="token operator">=</span><span class="token string">'33'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件的嵌套时，属性可以级级下放。组件不能改变父组件传入的props，可以子组件的props。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> InnerComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>a herf<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">'data-herf'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>去这个网站<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>InnerComponent data<span class="token operator">-</span>herf<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">'data-herf'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>MyComponent info<span class="token operator">=</span><span class="token string">'百度'</span> data<span class="token operator">-</span>herf<span class="token operator">=</span><span class="token string">'http://www.baidu.com'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>MyComponent info<span class="token operator">=</span><span class="token string">'网易'</span> data<span class="token operator">-</span>herf<span class="token operator">=</span><span class="token string">'http://www.163.com'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>MyComponent info<span class="token operator">=</span><span class="token string">'爱奇艺'</span> data<span class="token operator">-</span>herf<span class="token operator">=</span><span class="token string">'http://www.iqiyi.com'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>this.props.children，指的是该组件的子节点，类似于vue的slot插槽的作用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">FancyBorder</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'FancyBorder FancyBorder-'</span> <span class="token operator">+</span> props<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">WelcomeDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>FancyBorder color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">&quot;Dialog-title&quot;</span><span class="token operator">&gt;</span>
            Welcome
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">&quot;Dialog-message&quot;</span><span class="token operator">&gt;</span>
            Thank you <span class="token keyword">for</span> visiting our spacecraft<span class="token operator">!</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>FancyBorder<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>写到标签上的props(属性)默认值为&quot;true&quot;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>MyTextBox autocomplete <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// 等于</span>
<span class="token operator">&lt;</span>MyTextBox autocomplete<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>属性扩展，…扩展符，谨慎使用，容易使一些不相关的 props(属性)传递给组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting firstName<span class="token operator">=</span><span class="token string">&quot;Ben&quot;</span> lastName<span class="token operator">=</span><span class="token string">&quot;Hector&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">App2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>firstName<span class="token operator">:</span> <span class="token string">'Ben'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'Hector'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>props.children，在 JSX 表达式中可以包含开放标签和闭合标签，标签中的内容会被传递给children。children是一个数组。
Booleans、Null和Undefined被忽略：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 下面的<span class="token constant">JSX</span>表达式渲染效果是相同的： <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><strong>可以使用 PropTypes 进行类型检查。</strong></p> <h2 id="表单元素和受控组件"><a href="#表单元素和受控组件" class="header-anchor">#</a> 表单元素和受控组件</h2> <p>在 HTML 中，表单元素如&lt;input&gt;，&lt;textarea&gt; 和 &lt;select&gt; 表单元素通常保持自己的状态，并根据用户输入进行更新。而在 React 中，可变状态一般保存在组件的 state(状态) 属性中，并且只能通过 setState() 更新。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>setState更新state是一个异步的过程，第二个参数是回调函数。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">NameForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

          <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>value<span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改变后的value</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// value未被改变</span>
      <span class="token punctuation">}</span>

      <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'A name was submitted: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
          event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
                    Name<span class="token operator">:</span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span>       <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;Submit&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
           <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当您需要处理多个受控的 input 元素时，您可以为每个元素添加一个 name 属性，并且让处理函数根据 event.target.name 的值来选择要做什么。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Reservation</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            isGoing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            numberOfGuests<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'checkbox'</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>checked <span class="token operator">:</span> target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> target<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> value
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>form<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
                Is going<span class="token operator">:</span>
                <span class="token operator">&lt;</span>input
                    name<span class="token operator">=</span><span class="token string">&quot;isGoing&quot;</span>
                    type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span>
                    checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isGoing<span class="token punctuation">}</span>
                    onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
                Number <span class="token keyword">of</span> guests<span class="token operator">:</span>
                <span class="token operator">&lt;</span>input
                    name<span class="token operator">=</span><span class="token string">&quot;numberOfGuests&quot;</span>
                    type<span class="token operator">=</span><span class="token string">&quot;number&quot;</span>
                    value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>numberOfGuests<span class="token punctuation">}</span>
                    onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="数据流向"><a href="#数据流向" class="header-anchor">#</a> 数据流向</h2> <p>React应用中，对可变的数据应该循序&quot;单一数据源&quot;原则。</p> <ul><li>状态提升: state首先被添加到需要它进行渲染的组件。然后，如果其它的组件也需要它，你可以提升状态到它们最近的祖先组件</li> <li>从上到下的数据流向 ，而不是试图在不同的组件中同步状态。</li></ul> <h2 id="获得dom元素"><a href="#获得dom元素" class="header-anchor">#</a> 获得DOM元素</h2> <p>添加事件监听onClick、onMoouseenter、onFocus，on之后的字母大写，React用DOM2级绑定到冒泡阶段上。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>虚拟DOM必须等组件mounted</strong>之后才能获得这个DOM。
不能在函数式组件上使用 ref 属性，因为它们没有实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">MyFunctionalComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里 *不会* 执行！</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>MyFunctionalComponent
                ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textInput <span class="token operator">=</span> input<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <p>可以使用ref钩子获取得到DOM元素。ref就是reference，引用的意思。引用的使用用refs。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>inner<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'red'</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>InnerComponent ref<span class="token operator">=</span><span class="token string">'inner'</span> data<span class="token operator">-</span>herf<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">'data-herf'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="组件间消息的传递"><a href="#组件间消息的传递" class="header-anchor">#</a> 组件间消息的传递</h2> <p>组件和组件的关系，一般来说就是两种：父子、兄弟。</p> <ul><li>父子组件传递消息/事件，通过props;</li> <li>兄弟组件，可以使用状态提升，把消息/事件写到父组件内；</li></ul> <h2 id="组件的生命周期"><a href="#组件的生命周期" class="header-anchor">#</a> 组件的生命周期</h2> <p>一个组件主要有三个周期：首次渲染、state更新、组件销毁。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// v16</span>
    <span class="token number">4.</span> Updating state based on props
    <span class="token number">7.</span> Fetching external data when props change
<span class="token punctuation">}</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token number">1.</span> Initializing state
<span class="token punctuation">}</span>
componentWillMount <span class="token punctuation">{</span>
    <span class="token comment">// 在渲染前调用,在客户端也在服务端。</span>
    <span class="token number">1.</span> Initializing state
    <span class="token number">2.</span> Fetching external data
    <span class="token number">3.</span> Adding event <span class="token function">listeners</span> <span class="token punctuation">(</span>or subscriptions<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
componentDidMount <span class="token punctuation">{</span>
    <span class="token comment">// 在第一次渲染后调用，只在客户端。之后组件已经生成了对应的DOM结构，可以通过this.refs来进行访问。</span>
    <span class="token comment">// 如果你想和其他JavaScript框架一起使用，可以在这个方法中调用setTimeout, setInterval或者发送AJAX请求等操作(防止异部操作阻塞UI)。</span>
    <span class="token number">2.</span> Fetching external data
    <span class="token number">3.</span> Adding event <span class="token function">listeners</span> <span class="token punctuation">(</span>or subscriptions<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件接收到一个新的prop时被调用。这个方法在初始化render时不会被调用。</span>
    <span class="token number">4.</span> Updating state based on props
    <span class="token number">6.</span> Side effects on props change
    <span class="token number">7.</span> Fetching external data when props change
<span class="token punctuation">}</span>
<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断数据变化，避免重复渲染</span>
    <span class="token comment">// 返回一个布尔值。在组件接收到新的props或者state时被调用。在初始化时或者使用forceUpdate时不被调用。</span>
    <span class="token comment">// 可以在你确认不需要更新组件时使用，优化页面时会用到</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件接收到新的props或者state但还没有render时被调用。在初始化时不会被调用。</span>
    <span class="token comment">// 5.Invoking external callbacks</span>
    <span class="token comment">// 8.Reading DOM properties before an update</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理数据，渲染DOM</span>
<span class="token punctuation">}</span>
<span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// v16</span>
    <span class="token comment">// 在render之后，但在节点挂载前可以读取生成的DOM元素</span>
    <span class="token number">8.</span>Reading <span class="token constant">DOM</span> properties before an update
<span class="token punctuation">}</span>
<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件完成更新后立即调用。在初始化时不会被调用。</span>
    <span class="token number">5.</span> Invoking external callbacks
    <span class="token number">6.</span> Side effects on props change
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在组件从DOM中移除的时候立刻被调用。</span>
<span class="token punctuation">}</span>
<span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// v16</span>
    <span class="token comment">// React 组件错误边界：可以在子组件树的任何位置捕获 JavaScript 错误</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>组件优化：shouldComponentUpdate、循环出来的组件加key属性。</strong></p> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>React 16.8的新增特性，可以让你在不编写class的情况下使用state以及其他的React特性。</p> <ul><li>使用Hook可以在不更改组件层次结构的情况下重用有状态逻辑；</li> <li>根据相关的部分（例如设置订阅或获取数据）将一个组件拆分为较小的函数；</li> <li>在没有类的情况下使用更多React的功能。</li></ul> <ol><li>useState：返回一对：当前状态值(count)和允许你更新状态的函数(setCount);</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Com</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span> <span class="token comment">/* useState的参数就是其默认值，0 */</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>buttom<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>useEffect：组件执行副作用的功能。类似componentDidMount，componentDidUpdate和componentWillUnmount具有相同的用途，但统一为单个API。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">FriendStatus</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* 可以使用多个，并且可以执行回调函数 */</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOnline <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Loading...'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isOnline <span class="token operator">?</span> <span class="token string">'Online'</span> <span class="token operator">:</span> <span class="token string">'Offline'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>useContext：订阅React上下文而不引入嵌套；</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>LocaleContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>useReducer：管理复杂组件的本地状态；</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>todosReducer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/index/5.前端框架/1.一些概念.html" class="prev">
        1.一些概念
      </a></span> <span class="next"><a href="/index/5.前端框架/3.react源码.html">
        3.react源码
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/index/assets/js/app.9915e749.js" defer></script><script src="/index/assets/js/2.6552fd95.js" defer></script><script src="/index/assets/js/13.36729f04.js" defer></script>
  </body>
</html>
