<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10.DOM2 | Yankyao</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/index/favicon.ico">
    <script>(function() {
            const theme = localStorage.getItem('theme');
            if(theme) {
              document.documentElement.classList.add(theme);
            }
        })()</script>
    <meta name="description" content="个人主页">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="preload" href="/index/assets/css/0.styles.8e715b3c.css" as="style"><link rel="preload" href="/index/assets/js/app.616a5d86.js" as="script"><link rel="preload" href="/index/assets/js/3.1c123f76.js" as="script"><link rel="preload" href="/index/assets/js/5.617e483c.js" as="script"><link rel="prefetch" href="/index/assets/js/10.f946ddfb.js"><link rel="prefetch" href="/index/assets/js/11.7ca028bd.js"><link rel="prefetch" href="/index/assets/js/12.efc30772.js"><link rel="prefetch" href="/index/assets/js/13.0fb4045c.js"><link rel="prefetch" href="/index/assets/js/14.e1a8fc61.js"><link rel="prefetch" href="/index/assets/js/15.e2c47e9b.js"><link rel="prefetch" href="/index/assets/js/16.84ddb9b3.js"><link rel="prefetch" href="/index/assets/js/17.28a272b1.js"><link rel="prefetch" href="/index/assets/js/18.159d6c82.js"><link rel="prefetch" href="/index/assets/js/19.7cb29359.js"><link rel="prefetch" href="/index/assets/js/2.f640426f.js"><link rel="prefetch" href="/index/assets/js/20.958b3486.js"><link rel="prefetch" href="/index/assets/js/21.c0008dbc.js"><link rel="prefetch" href="/index/assets/js/22.3a84ca04.js"><link rel="prefetch" href="/index/assets/js/23.5921138e.js"><link rel="prefetch" href="/index/assets/js/24.c33e2445.js"><link rel="prefetch" href="/index/assets/js/25.b7280818.js"><link rel="prefetch" href="/index/assets/js/26.29409481.js"><link rel="prefetch" href="/index/assets/js/27.2e608d78.js"><link rel="prefetch" href="/index/assets/js/28.a6e39256.js"><link rel="prefetch" href="/index/assets/js/29.a0eeb6c2.js"><link rel="prefetch" href="/index/assets/js/30.4b251976.js"><link rel="prefetch" href="/index/assets/js/31.bf2a7f5d.js"><link rel="prefetch" href="/index/assets/js/32.03da61f5.js"><link rel="prefetch" href="/index/assets/js/33.12b1b222.js"><link rel="prefetch" href="/index/assets/js/34.4863790e.js"><link rel="prefetch" href="/index/assets/js/35.d9cb002e.js"><link rel="prefetch" href="/index/assets/js/36.32cd5cc0.js"><link rel="prefetch" href="/index/assets/js/37.658aece8.js"><link rel="prefetch" href="/index/assets/js/38.e97b9ebe.js"><link rel="prefetch" href="/index/assets/js/39.ce9aabc9.js"><link rel="prefetch" href="/index/assets/js/4.b28fbb04.js"><link rel="prefetch" href="/index/assets/js/40.9fe8550e.js"><link rel="prefetch" href="/index/assets/js/41.c927e06e.js"><link rel="prefetch" href="/index/assets/js/42.cc52b19f.js"><link rel="prefetch" href="/index/assets/js/43.aafc913b.js"><link rel="prefetch" href="/index/assets/js/44.665f5dc1.js"><link rel="prefetch" href="/index/assets/js/45.996e6e7b.js"><link rel="prefetch" href="/index/assets/js/46.e9783fe5.js"><link rel="prefetch" href="/index/assets/js/47.0d61feab.js"><link rel="prefetch" href="/index/assets/js/48.4ffdce64.js"><link rel="prefetch" href="/index/assets/js/49.5cbb9ccf.js"><link rel="prefetch" href="/index/assets/js/50.bedbb097.js"><link rel="prefetch" href="/index/assets/js/51.f0dbfffc.js"><link rel="prefetch" href="/index/assets/js/52.73dd07c3.js"><link rel="prefetch" href="/index/assets/js/53.195b07fa.js"><link rel="prefetch" href="/index/assets/js/54.06b5b4c6.js"><link rel="prefetch" href="/index/assets/js/55.805c5424.js"><link rel="prefetch" href="/index/assets/js/56.78a67d01.js"><link rel="prefetch" href="/index/assets/js/57.a8dfe051.js"><link rel="prefetch" href="/index/assets/js/58.acac9c38.js"><link rel="prefetch" href="/index/assets/js/59.64640e48.js"><link rel="prefetch" href="/index/assets/js/6.63039d09.js"><link rel="prefetch" href="/index/assets/js/60.5c1e89a8.js"><link rel="prefetch" href="/index/assets/js/61.a4d694c4.js"><link rel="prefetch" href="/index/assets/js/62.7fec771d.js"><link rel="prefetch" href="/index/assets/js/63.b406a2e3.js"><link rel="prefetch" href="/index/assets/js/64.4e64e829.js"><link rel="prefetch" href="/index/assets/js/65.0f36adc2.js"><link rel="prefetch" href="/index/assets/js/66.3ddfe175.js"><link rel="prefetch" href="/index/assets/js/67.0ee31d44.js"><link rel="prefetch" href="/index/assets/js/68.df5f6a50.js"><link rel="prefetch" href="/index/assets/js/69.ef1a20a1.js"><link rel="prefetch" href="/index/assets/js/7.74c3c48d.js"><link rel="prefetch" href="/index/assets/js/70.5d2c241e.js"><link rel="prefetch" href="/index/assets/js/71.53a85aed.js"><link rel="prefetch" href="/index/assets/js/72.bf96963b.js"><link rel="prefetch" href="/index/assets/js/73.cb67b0ea.js"><link rel="prefetch" href="/index/assets/js/8.14e82a3d.js"><link rel="prefetch" href="/index/assets/js/9.007e4c2a.js">
    <link rel="stylesheet" href="/index/assets/css/0.styles.8e715b3c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/index/" class="home-link router-link-active"><!----> <span class="site-name">Yankyao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/index/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/index/about.html" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/index/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/index/about.html" class="nav-link">
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.入门</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3.css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>4.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/index/4.js/1.js基础.html" class="sidebar-link">1.js基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#hello-world" class="sidebar-link">Hello World</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#字面量" class="sidebar-link">字面量</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#js数据类型" class="sidebar-link">JS数据类型</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#数据类型的转换" class="sidebar-link">数据类型的转换</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#运算符" class="sidebar-link">运算符</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#运算符优先级" class="sidebar-link">运算符优先级</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#对象" class="sidebar-link">对象</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#json" class="sidebar-link">JSON</a></li><li class="sidebar-sub-header"><a href="/index/4.js/1.js基础.html#js中的声明提升" class="sidebar-link">JS中的声明提升</a></li></ul></li><li><a href="/index/4.js/2.数组字符串.html" class="sidebar-link">2.数组字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/2.数组字符串.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/index/4.js/2.数组字符串.html#数组遍历" class="sidebar-link">数组遍历</a></li><li class="sidebar-sub-header"><a href="/index/4.js/2.数组字符串.html#数组操作方法" class="sidebar-link">数组操作方法</a></li><li class="sidebar-sub-header"><a href="/index/4.js/2.数组字符串.html#字符串常用方法" class="sidebar-link">字符串常用方法</a></li></ul></li><li><a href="/index/4.js/3.函数.html" class="sidebar-link">3.函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数的声明和调用" class="sidebar-link">函数的声明和调用</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数的参数" class="sidebar-link">函数的参数</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数的特点" class="sidebar-link">函数的特点</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#模块化编程" class="sidebar-link">模块化编程</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数递归" class="sidebar-link">函数递归</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数表达式" class="sidebar-link">函数表达式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数作用域" class="sidebar-link">函数作用域</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数重载" class="sidebar-link">函数重载</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#iife" class="sidebar-link">IIFE</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#函数的上下文" class="sidebar-link">函数的上下文</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#闭包closure" class="sidebar-link">闭包closure</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#高级函数-高阶函数" class="sidebar-link">高级函数/高阶函数</a></li><li class="sidebar-sub-header"><a href="/index/4.js/3.函数.html#thunk函数" class="sidebar-link">Thunk函数</a></li></ul></li><li><a href="/index/4.js/4.条件和循环.html" class="sidebar-link">4.条件和循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/4.条件和循环.html#条件分支语句" class="sidebar-link">条件分支语句</a></li><li class="sidebar-sub-header"><a href="/index/4.js/4.条件和循环.html#循环语句" class="sidebar-link">循环语句</a></li><li class="sidebar-sub-header"><a href="/index/4.js/4.条件和循环.html#组合用法" class="sidebar-link">组合用法</a></li></ul></li><li><a href="/index/4.js/5.正则.html" class="sidebar-link">5.正则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/5.正则.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/index/4.js/5.正则.html#正则的术语和操作符" class="sidebar-link">正则的术语和操作符</a></li></ul></li><li><a href="/index/4.js/6.oop.html" class="sidebar-link">6.oop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#hasownproperty" class="sidebar-link">hasOwnProperty</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#用面向对象的思维来写程序" class="sidebar-link">用面向对象的思维来写程序</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#面向对象概述" class="sidebar-link">面向对象概述</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#内置构造函数" class="sidebar-link">内置构造函数</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#原型链深入" class="sidebar-link">原型链深入</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#constructor属性" class="sidebar-link">constructor属性</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#instanceof运算符" class="sidebar-link">instanceof运算符</a></li><li class="sidebar-sub-header"><a href="/index/4.js/6.oop.html#继承" class="sidebar-link">继承</a></li></ul></li><li><a href="/index/4.js/7.es67.html" class="sidebar-link">7.es67</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#es6" class="sidebar-link">es6</a></li><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#es7" class="sidebar-link">es7</a></li><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#es8" class="sidebar-link">es8</a></li><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#es2020" class="sidebar-link">es2020</a></li><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#模块机制" class="sidebar-link">模块机制</a></li><li class="sidebar-sub-header"><a href="/index/4.js/7.es67.html#类-class" class="sidebar-link">类（class）</a></li></ul></li><li><a href="/index/4.js/8.bom.html" class="sidebar-link">8.BOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#常用方法" class="sidebar-link">常用方法</a></li><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#location对象" class="sidebar-link">location对象</a></li><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#navigator对象" class="sidebar-link">navigator对象</a></li><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#screen对象" class="sidebar-link">screen对象</a></li><li class="sidebar-sub-header"><a href="/index/4.js/8.bom.html#history对象" class="sidebar-link">history对象</a></li></ul></li><li><a href="/index/4.js/9.dom1.html" class="sidebar-link">9.DOM1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#获取元素" class="sidebar-link">获取元素</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#事件" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#计算后样式" class="sidebar-link">计算后样式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#快捷尺寸和位置" class="sidebar-link">快捷尺寸和位置</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#原生js方法操作dom节点" class="sidebar-link">原生JS方法操作DOM节点</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#事件监听-注意兼容" class="sidebar-link">事件监听（注意兼容）</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#事件对象event、阻止冒泡、阻止默认事件" class="sidebar-link">事件对象event、阻止冒泡、阻止默认事件</a></li><li class="sidebar-sub-header"><a href="/index/4.js/9.dom1.html#jquery中的dom节点操作" class="sidebar-link">jQuery中的DOM节点操作</a></li></ul></li><li><a href="/index/4.js/10.dom2.html" aria-current="page" class="active sidebar-link">10.DOM2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#鼠标位置" class="sidebar-link">鼠标位置</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#盒子位置" class="sidebar-link">盒子位置</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#拖拽" class="sidebar-link">拖拽</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#在父容器内拖拽" class="sidebar-link">在父容器内拖拽</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#京东商城放大镜" class="sidebar-link">京东商城放大镜</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#鼠标滚轮事件" class="sidebar-link">鼠标滚轮事件</a></li><li class="sidebar-sub-header"><a href="/index/4.js/10.dom2.html#窗口的宽度、高度" class="sidebar-link">窗口的宽度、高度</a></li></ul></li><li><a href="/index/4.js/11.jquery.html" class="sidebar-link">11.Jquery</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#对象" class="sidebar-link">$对象</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#选择器" class="sidebar-link">选择器</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#jquery的常用方法" class="sidebar-link">jQuery的常用方法</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#节点关系-选择器" class="sidebar-link">节点关系/选择器</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#jquery遍历dom" class="sidebar-link">jQuery遍历DOM</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#animate动画" class="sidebar-link">animate动画</a></li><li class="sidebar-sub-header"><a href="/index/4.js/11.jquery.html#常用方法" class="sidebar-link">常用方法</a></li></ul></li><li><a href="/index/4.js/12.设计模式.html" class="sidebar-link">12.设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#重要性" class="sidebar-link">重要性</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#工厂模式" class="sidebar-link">工厂模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#观察者模式" class="sidebar-link">观察者模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#发布订阅模式" class="sidebar-link">发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#代理模式" class="sidebar-link">代理模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#策略模式" class="sidebar-link">策略模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#命令模式" class="sidebar-link">命令模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#中介者模式" class="sidebar-link">中介者模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#装饰者模式" class="sidebar-link">装饰者模式</a></li><li class="sidebar-sub-header"><a href="/index/4.js/12.设计模式.html#责任链接模式" class="sidebar-link">责任链接模式</a></li></ul></li><li><a href="/index/4.js/13.其他.html" class="sidebar-link">13.其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#事件环event-loop" class="sidebar-link">事件环Event Loop</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#滚屏" class="sidebar-link">滚屏</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#常用js库" class="sidebar-link">常用JS库</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#抛出错误" class="sidebar-link">抛出错误</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#cookie和session" class="sidebar-link">Cookie和Session</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#隐式转换" class="sidebar-link">隐式转换</a></li><li class="sidebar-sub-header"><a href="/index/4.js/13.其他.html#语言增强" class="sidebar-link">语言增强</a></li></ul></li><li><a href="/index/4.js/14.ts.html" class="sidebar-link">14.TS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#类和静态方法" class="sidebar-link">类和静态方法</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#接口interface" class="sidebar-link">接口interface</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#范型" class="sidebar-link">范型</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#模块和命名空间" class="sidebar-link">模块和命名空间</a></li><li class="sidebar-sub-header"><a href="/index/4.js/14.ts.html#装饰器" class="sidebar-link">装饰器</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.前端框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.前端工程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.前后端交互</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.面试相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_10-dom2"><a href="#_10-dom2" class="header-anchor">#</a> 10.DOM2</h1> <h2 id="鼠标位置"><a href="#鼠标位置" class="header-anchor">#</a> 鼠标位置</h2> <blockquote><p>当我们给某一个盒子添加鼠标事件监听的时候（click、mouseover、mouseout、mouseleave、mousemove等等）一定都有四组值：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>event<span class="token punctuation">.</span>offsetX   event<span class="token punctuation">.</span>offsetY
<span class="token comment">// event.offsetY表示用户指针到盒子的顶端距离，后面将学习会被儿子影响。鼠标指针所在位置到此时最内层盒子左上角的距离。</span>
event<span class="token punctuation">.</span>pageX     event<span class="token punctuation">.</span>pageY
<span class="token comment">// event.pageY表示鼠标指针到页面顶端的距离，IE6、7、8不兼容</span>
event<span class="token punctuation">.</span>screenX   event<span class="token punctuation">.</span>screenY
<span class="token comment">// event.screenY表示用户指针到屏幕顶端的距离</span>
event<span class="token punctuation">.</span>clientX   event<span class="token punctuation">.</span>clientY
<span class="token comment">// event.clientY表示用户指针到视口顶端的距离，什么是视口，看上图</span>
</code></pre></div><blockquote><p>当页面没有卷动的时候，event.clientY一定等于event.pageY。或者换句话说，event.pageY等于event.clientY+页面卷动值；IE6、7、8不兼容event.pageX、event.pageY；offsetX/Y会被子元素影响
那怎么得到合理的offsetX、offsetY呢？用event.pageY减去盒子的净位置，就是不受影响的offsetY的值！</p></blockquote> <h2 id="盒子位置"><a href="#盒子位置" class="header-anchor">#</a> 盒子位置</h2> <blockquote><p>任何一个HTML元素都有offsetParent属性，和offsetLeft、offsetTop属性。</p></blockquote> <blockquote><p>offsetParent，字面意思表示自己的定位父元素。IE6中有一个问题，如果xiaoming自己没有定位，此时自己的直系亲属中，离自己最近的有宽度或者高度的祖先元素就是自己的offsetParent；如果xiaoming自己定位了，表现和高级浏览器一样。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;box1&quot;</span><span class="token operator">&gt;</span> →绝对定位
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;box2&quot;</span><span class="token operator">&gt;</span> →相对定位
        <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;box3&quot;</span><span class="token operator">&gt;</span> →没有定位
            <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;xiaoming&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">// xiaoming的offsetParent就是自己的直系亲属中，离自己最近的已经定位的祖先元素。上面的例子中，box2就是xiaoming的offsetParent。</span>
</code></pre></div><blockquote><p>盒子在页面中的净位置，可以用offsetParent和offsetTop来计算一个元素的净位置了。是一个迭代：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>xiaoming的净位置<span class="token operator">=</span> xiaoming<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> xiaoming<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>borderTop <span class="token operator">+</span>
                 xiaoming<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> xiaoming<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>borderTop <span class="token operator">+</span> ……
</code></pre></div><blockquote><p>下面的函数就是得到一个元素在页面上的总净位置：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPureOffset</span><span class="token punctuation">(</span><span class="token parameter">nodeId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> thisNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'nodeId'</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>
        top<span class="token operator">:</span> thisNode<span class="token punctuation">.</span>offsetTop<span class="token punctuation">,</span>
        left<span class="token operator">:</span> thisNode<span class="token punctuation">.</span>offsetLeft
    <span class="token punctuation">}</span>
    <span class="token comment">// 判断是不是IE8</span>
    <span class="token keyword">var</span> isIE8 <span class="token operator">=</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'MSIE 8.0'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token comment">// 进行迭代</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>thisNode <span class="token operator">===</span> thisNode<span class="token punctuation">.</span>offsetParent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>getComputedStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> borderTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>thisNode<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'border-top-width'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">var</span> borderLeft <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>thisNode<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'border-left-width'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> borderTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>thisNode<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span><span class="token string">'border-top-width'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">var</span> borderLeft <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>thisNode<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span><span class="token string">'border-left-width'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 验证一下borderTop是不是undefined或者NaN，是的话置为0</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>borderTop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            borderTop <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>borderLeft<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            borderLeft <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 不是IE8的话，需要加上边框</span>
        <span class="token operator">!</span>isIE8 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>top <span class="token operator">+=</span> borderTop<span class="token punctuation">)</span>
        <span class="token operator">!</span>isIE8 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>left <span class="token operator">+=</span> borderLeft<span class="token punctuation">)</span>
    
        <span class="token comment">// 进行累加</span>
        result<span class="token punctuation">.</span>top <span class="token operator">+=</span> thisNode<span class="token punctuation">.</span>offsetTop
        result<span class="token punctuation">.</span>left <span class="token operator">+=</span> thisNode<span class="token punctuation">.</span>offsetLeft
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>jQuery中，如果想得到xiaoming的净位置，只需要一行：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
</code></pre></div><h2 id="拖拽"><a href="#拖拽" class="header-anchor">#</a> 拖拽</h2> <p>在页面上拖拽，页面上的元素，能够被鼠标拖拽。
整体思路：</p> <ul><li>当鼠标在img上按下去的时候，注册document的鼠标移动事件监听；反之，当鼠标在屏幕任何位置抬起的时候，剥夺document的鼠标移动事件监听。</li> <li>为了让鼠标能够一直按住图片的同一个位置，比如脑门子，所以要在mousedown的一瞬间记录误差（见下图）。</li></ul> <img src="/index/assets/img/3.9.1.dc90e067.png" width="500"> <blockquote><p>整体代码：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
<span class="token comment">// 鼠标按下</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 阻止默认事件</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 记录误差，目的是按住图片某点的时候，鼠标指针一直保持在这个点</span>
    <span class="token keyword">var</span> dx <span class="token operator">=</span> event<span class="token punctuation">.</span>offsetX
    <span class="token keyword">var</span> dy <span class="token operator">=</span> event<span class="token punctuation">.</span>offsetY
    <span class="token comment">// 鼠标移动，在document上添加移动事件，才能大范围拖动</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 移动的时候，鼠标的top值等于当前鼠标指针位置减去误差</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">-</span> dx
        <span class="token keyword">var</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">-</span> dy
        <span class="token comment">// 移动图片</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 移除监听</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="在父容器内拖拽"><a href="#在父容器内拖拽" class="header-anchor">#</a> 在父容器内拖拽</h2> <p>图片在父容器中拖拽，不仅仅是给图片增加了一个运动区域的限制，更要命的是图片的top、left参考点是鼠标指针的位置点，不一致。图片的top、left值原点是A点；而鼠标指针event.pageX、event.pageY的参考点是B点。</p> <img src="/index/assets/img/3.9.2.a5e5020a.png" width="300"> <p>所以解决办法有两种：</p> <ul><li>方法1：使用增量。记录按下鼠标的时候的鼠标的startX = event.pageX和startY =event.pageY。当移动鼠标时候，鼠标的event.pageX和event.pageY对于一开始的startX和startY的变化量，就是top和left的变化量！</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
<span class="token comment">// 设置信号量，盒子位置</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">100</span>
<span class="token comment">// 设置变化量</span>
<span class="token keyword">var</span> deltaX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> deltaY <span class="token operator">=</span> <span class="token number">0</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 记录鼠标指针到页面左上角的距离</span>
    <span class="token keyword">var</span> startX <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> startY <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当前鼠标指针的位置和刚按下鼠标时的变化量</span>
        deltax <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX <span class="token operator">-</span> startX
        deltaY <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY <span class="token operator">-</span> startY
        <span class="token comment">// 校验，保证图片在box容器中</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>deltaX <span class="token operator">&gt;</span> <span class="token number">300</span> <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            deltaX <span class="token operator">=</span> <span class="token number">300</span> <span class="token operator">-</span> x
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>deltaX <span class="token operator">&lt;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            deltaX <span class="token operator">=</span> <span class="token operator">-</span>x
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>deltaY <span class="token operator">&gt;</span> <span class="token number">300</span> <span class="token operator">-</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            deltaY <span class="token operator">=</span> <span class="token number">300</span> <span class="token operator">-</span> y
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>deltaY <span class="token operator">&lt;</span> <span class="token operator">-</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            deltaY <span class="token operator">=</span> <span class="token operator">-</span>y
        <span class="token punctuation">}</span>
        <span class="token comment">// 图片同步移动</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> deltaX <span class="token operator">+</span> <span class="token string">'px'</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> deltaY <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 重点：当鼠标抬起的时候，要重新设置信号量</span>
    x <span class="token operator">=</span> x <span class="token operator">+</span> deltaX
    y <span class="token operator">=</span> y <span class="token operator">+</span> deltaY
    <span class="token comment">// 重置变化量</span>
    deltaX <span class="token operator">=</span> <span class="token number">0</span>
    deltaY <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment">// 剥夺监听</span>
    document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>方法2：就是我们把坐标系统一了，不就行了么？所以我们需要得到鼠标指针相对于盒子的坐标位置，此时需要使用曲线救国的方式！因为offsetX/Y被儿子影响。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 记录误差</span>
    <span class="token keyword">var</span> dx <span class="token operator">=</span> event<span class="token punctuation">.</span>offsetX<span class="token punctuation">,</span> dy <span class="token operator">=</span> event<span class="token punctuation">.</span>offsetY
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 当前鼠标指针以box为参照</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token function">getPureOffset</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">-</span> dx
        <span class="token keyword">var</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY <span class="token operator">-</span> <span class="token function">getPureOffset</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> dy
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="京东商城放大镜"><a href="#京东商城放大镜" class="header-anchor">#</a> 京东商城放大镜</h2> <p>京东商城的放大镜原理：不是真的放大，只是当左侧小放大镜移动的时候，右侧的大图也按比例进行移动，形成放大感觉。注意比例问题，小图盒子350宽，放大镜175宽；大图盒子400宽，大图800宽。这里暗含了两个1:2，比例一定要相同，如果比例不相同，放大镜无法实现。</p> <img src="/index/assets/img/3.9.3.e7366bc2.png" width="600"> <blockquote><p>将坐标系统一：把鼠标的位置和放大镜的top、left位置都统一到盒子的左上角。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> smallPicBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'smallPicBox'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> zoom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'zoom'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> bigPic <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'bigPic'</span><span class="token punctuation">)</span>
<span class="token comment">// 设置净位置，获取smallPicBox的offsetX、offsetY</span>
<span class="token keyword">var</span> smallPicBoxLeft <span class="token operator">=</span> <span class="token function">getPureOffset</span><span class="token punctuation">(</span>smallPicBox<span class="token punctuation">)</span><span class="token punctuation">.</span>left
<span class="token keyword">var</span> smallPicBoxTop <span class="token operator">=</span> <span class="token function">getPureOffset</span><span class="token punctuation">(</span>smallPicBox<span class="token punctuation">)</span><span class="token punctuation">.</span>top

smallPicBox<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event
    <span class="token comment">// 设置鼠标指针到图片盒子的左上角的距离</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft
    <span class="token keyword">var</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop
    <span class="token comment">// zoom的top、left的值，和鼠标指针的位置相差了175 / 2</span>
    <span class="token comment">// 让放大镜居中</span>
    <span class="token keyword">var</span> zoomLeft <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">175</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> zoomTop <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">175</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token comment">// 校验</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>zoomLeft <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        zoomLeft <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>zoomLeft <span class="token operator">&gt;</span> <span class="token number">175</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        zoomLeft <span class="token operator">=</span> <span class="token number">175</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>zoomTop <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        zoomTop <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>zoomTop <span class="token operator">&gt;</span> <span class="token number">175</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        zoomTop <span class="token operator">=</span> <span class="token number">175</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 移动放大镜</span>
    zoom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> zoomLeft
    zoom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> zoomTop
    <span class="token comment">// 移动大图，大图总共能移动400px，放大镜总共能移动175px</span>
    <span class="token comment">// 放大镜每移动1px，大图移动400 / 175px</span>
    bigPic<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>zoomLeft<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token operator">/</span><span class="token number">175</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
    bigPic<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>zoomTop<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token operator">/</span><span class="token number">175</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="鼠标滚轮事件"><a href="#鼠标滚轮事件" class="header-anchor">#</a> 鼠标滚轮事件</h2> <p>页面中经常有鼠标滚轮事件，比如做一个内置的有纵向滚动条的盒子。Chrome和IE各版本浏览器都支持onmousewheel事件，表示鼠标滚轮滚动的时候触发；火狐不支持这个事件，它支持的是自己的DOMMouseScroll事件。我们不需要进行能力检测，因为所有浏览器添加自己没有的监听方法，都静默，不报错。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 大部分浏览器</span>
box<span class="token punctuation">.</span>onmousewheel <span class="token operator">=</span> mousewheelHandler
<span class="token comment">// 火狐浏览器</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> mousewheelHandler<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">mousewheelHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>鼠标滚轮事件的event对象有属性wheelDelta，火狐是detail属性。可以反映你的滚轮方向和力度，非火狐向上是120的倍数，力度越大数字越大；火狐向上是-3，正负性火狐反着的，所以要进行兼容处理。见下图。</p></blockquote> <h2 id="窗口的宽度、高度"><a href="#窗口的宽度、高度" class="header-anchor">#</a> 窗口的宽度、高度</h2> <blockquote><p>先认识一个对象：document.documentElement，就是页面的html元素。现在想得到窗口的高度，不是window对象的属性，而是html标签的属性。所以：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
<span class="token comment">// 但是去掉页面的DTD，或者IE6及更低版本中，确是把</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight
<span class="token comment">// 当做浏览器窗口的高度的。</span>
<span class="token comment">// 兼容写法</span>
<span class="token keyword">var</span> windowheight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight
</code></pre></div><img src="/index/assets/img/3.9.4.a8d3c05f.png" width="400"> <blockquote><p>IE认为卷动是document.documentElement的属性：document.documentElement.scrollTop，高级浏览器认为document.body的属性：document.body.scrollTop。所以：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop
</code></pre></div><img src="/index/assets/img/3.9.5.fff85bf9.png" width="400"> <blockquote><p>卷动事件，当窗口无论因为什么卷动了，都会触发这个事件。比如按键盘↓了，按pageDown，滚动滚轮了，拖拽滚动条了。都会触发这儿事件。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/index/4.js/9.dom1.html" class="prev">
        9.DOM1
      </a></span> <span class="next"><a href="/index/4.js/11.jquery.html">
        11.Jquery
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/index/assets/js/app.616a5d86.js" defer></script><script src="/index/assets/js/3.1c123f76.js" defer></script><script src="/index/assets/js/5.617e483c.js" defer></script>
  </body>
</html>
