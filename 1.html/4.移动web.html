<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.移动WEB | GGS DDU</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="GGS DDU">
    <link rel="preload" href="/index/assets/css/0.styles.5331c3bc.css" as="style"><link rel="preload" href="/index/assets/js/app.9915e749.js" as="script"><link rel="preload" href="/index/assets/js/2.6552fd95.js" as="script"><link rel="preload" href="/index/assets/js/19.048b44c9.js" as="script"><link rel="prefetch" href="/index/assets/js/10.54b794c8.js"><link rel="prefetch" href="/index/assets/js/11.14c22ce7.js"><link rel="prefetch" href="/index/assets/js/12.e3224cb5.js"><link rel="prefetch" href="/index/assets/js/13.36729f04.js"><link rel="prefetch" href="/index/assets/js/14.80c31306.js"><link rel="prefetch" href="/index/assets/js/15.32de8c8a.js"><link rel="prefetch" href="/index/assets/js/16.404663dd.js"><link rel="prefetch" href="/index/assets/js/17.efabd7a9.js"><link rel="prefetch" href="/index/assets/js/18.0b696e7a.js"><link rel="prefetch" href="/index/assets/js/20.e1b59749.js"><link rel="prefetch" href="/index/assets/js/21.9932956b.js"><link rel="prefetch" href="/index/assets/js/22.3efa7569.js"><link rel="prefetch" href="/index/assets/js/23.d90b8421.js"><link rel="prefetch" href="/index/assets/js/24.73c9aea6.js"><link rel="prefetch" href="/index/assets/js/25.d766cbc1.js"><link rel="prefetch" href="/index/assets/js/26.75e74a7a.js"><link rel="prefetch" href="/index/assets/js/27.c5d91bd4.js"><link rel="prefetch" href="/index/assets/js/28.50921aa3.js"><link rel="prefetch" href="/index/assets/js/29.06dd4398.js"><link rel="prefetch" href="/index/assets/js/3.7a5ae64e.js"><link rel="prefetch" href="/index/assets/js/30.b5057867.js"><link rel="prefetch" href="/index/assets/js/31.6f41dec4.js"><link rel="prefetch" href="/index/assets/js/32.71cee19b.js"><link rel="prefetch" href="/index/assets/js/33.7434fcd4.js"><link rel="prefetch" href="/index/assets/js/34.0d5baca1.js"><link rel="prefetch" href="/index/assets/js/35.423582c7.js"><link rel="prefetch" href="/index/assets/js/36.3b3a3740.js"><link rel="prefetch" href="/index/assets/js/37.457f484b.js"><link rel="prefetch" href="/index/assets/js/38.f5cdcf22.js"><link rel="prefetch" href="/index/assets/js/39.1b29ce18.js"><link rel="prefetch" href="/index/assets/js/4.a551fda6.js"><link rel="prefetch" href="/index/assets/js/40.da723c05.js"><link rel="prefetch" href="/index/assets/js/41.38cf67dc.js"><link rel="prefetch" href="/index/assets/js/42.64745509.js"><link rel="prefetch" href="/index/assets/js/43.08777138.js"><link rel="prefetch" href="/index/assets/js/44.a8d4bc4b.js"><link rel="prefetch" href="/index/assets/js/45.f6baf106.js"><link rel="prefetch" href="/index/assets/js/46.60ad6dec.js"><link rel="prefetch" href="/index/assets/js/47.33409ee4.js"><link rel="prefetch" href="/index/assets/js/48.fdc17f16.js"><link rel="prefetch" href="/index/assets/js/49.24ad2e90.js"><link rel="prefetch" href="/index/assets/js/5.9751f667.js"><link rel="prefetch" href="/index/assets/js/50.976ed520.js"><link rel="prefetch" href="/index/assets/js/51.76633c94.js"><link rel="prefetch" href="/index/assets/js/52.7d095590.js"><link rel="prefetch" href="/index/assets/js/53.ef65abdb.js"><link rel="prefetch" href="/index/assets/js/54.c9d8d01f.js"><link rel="prefetch" href="/index/assets/js/55.5887f80a.js"><link rel="prefetch" href="/index/assets/js/56.b38a017c.js"><link rel="prefetch" href="/index/assets/js/57.29636d08.js"><link rel="prefetch" href="/index/assets/js/58.5b98d662.js"><link rel="prefetch" href="/index/assets/js/59.8207af43.js"><link rel="prefetch" href="/index/assets/js/6.981a9465.js"><link rel="prefetch" href="/index/assets/js/60.567f44b4.js"><link rel="prefetch" href="/index/assets/js/61.6dc27254.js"><link rel="prefetch" href="/index/assets/js/62.b7ac1dd3.js"><link rel="prefetch" href="/index/assets/js/63.7b75705a.js"><link rel="prefetch" href="/index/assets/js/64.57b86c3d.js"><link rel="prefetch" href="/index/assets/js/65.79cfa2e1.js"><link rel="prefetch" href="/index/assets/js/7.c4d8d391.js"><link rel="prefetch" href="/index/assets/js/8.2758da50.js"><link rel="prefetch" href="/index/assets/js/9.648cff9b.js">
    <link rel="stylesheet" href="/index/assets/css/0.styles.5331c3bc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/index/" class="home-link router-link-active"><!----> <span class="site-name">GGS DDU</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1.html</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/index/1.html/1.html基础.html" class="sidebar-link">1.HTML基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/1.html/1.html基础.html#基础认知" class="sidebar-link">基础认知</a></li><li class="sidebar-sub-header"><a href="/index/1.html/1.html基础.html#html结构" class="sidebar-link">HTML结构</a></li><li class="sidebar-sub-header"><a href="/index/1.html/1.html基础.html#html语义化" class="sidebar-link">HTML语义化</a></li><li class="sidebar-sub-header"><a href="/index/1.html/1.html基础.html#字符实体" class="sidebar-link">字符实体</a></li></ul></li><li><a href="/index/1.html/2.html5.html" class="sidebar-link">2.html5</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#新语义标签" class="sidebar-link">新语义标签</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#新表单元素" class="sidebar-link">新表单元素</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#新的全局属性" class="sidebar-link">新的全局属性</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#视频和音频" class="sidebar-link">视频和音频</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#本地存储" class="sidebar-link">本地存储</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#websocket" class="sidebar-link">websocket</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#离线应用manifest" class="sidebar-link">离线应用Manifest</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#桌面通知notifications" class="sidebar-link">桌面通知Notifications</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#地理位置geolocation" class="sidebar-link">地理位置Geolocation</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#多任务webworker" class="sidebar-link">多任务Webworker</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#跨窗口通信postmessage" class="sidebar-link">跨窗口通信PostMessage</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#绘画canvas-绘图svg" class="sidebar-link">绘画Canvas 绘图svg</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#媒体播放的video和audio" class="sidebar-link">媒体播放的video和audio</a></li><li class="sidebar-sub-header"><a href="/index/1.html/2.html5.html#拖拽释放-drag-and-drop-api" class="sidebar-link">拖拽释放(Drag and drop) API</a></li></ul></li><li><a href="/index/1.html/3.canvas.html" class="sidebar-link">3.canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#关于canvas" class="sidebar-link">关于canvas</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#笔触、填充" class="sidebar-link">笔触、填充</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#弧和圆形" class="sidebar-link">弧和圆形</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#文字" class="sidebar-link">文字</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#使用图片" class="sidebar-link">使用图片</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#运动" class="sidebar-link">运动</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#canvas变形" class="sidebar-link">canvas变形</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#合成" class="sidebar-link">合成</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#像素操作" class="sidebar-link">像素操作</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#碰撞检测" class="sidebar-link">碰撞检测</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#事件监听" class="sidebar-link">事件监听</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#场景管理类" class="sidebar-link">场景管理类</a></li><li class="sidebar-sub-header"><a href="/index/1.html/3.canvas.html#requestanimationframe" class="sidebar-link">requestAnimationFrame</a></li></ul></li><li><a href="/index/1.html/4.移动web.html" class="active sidebar-link">4.移动WEB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#移动web" class="sidebar-link">移动WEB</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#视口" class="sidebar-link">视口</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#移动端布局-百分比布局" class="sidebar-link">移动端布局（百分比布局）</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#移动端常见布局" class="sidebar-link">移动端常见布局</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#移动端调试" class="sidebar-link">移动端调试</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#苹果端常用meta和link" class="sidebar-link">苹果端常用meta和link</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#常见问题" class="sidebar-link">常见问题</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#相关工具库" class="sidebar-link">相关工具库</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#触摸事件" class="sidebar-link">触摸事件</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#拖拽" class="sidebar-link">拖拽</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#惯性抛掷" class="sidebar-link">惯性抛掷</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#缓冲easeing" class="sidebar-link">缓冲easeing</a></li><li class="sidebar-sub-header"><a href="/index/1.html/4.移动web.html#手机滚屏幕" class="sidebar-link">手机滚屏幕</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.前后端交互</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.前端框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.前端工程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.各种必会方案</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.必会面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>10.方法论</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-移动web"><a href="#_4-移动web" class="header-anchor">#</a> 4.移动WEB</h1> <h2 id="移动web"><a href="#移动web" class="header-anchor">#</a> 移动WEB</h2> <p>手机上网越来越普遍，上网用户越来越多；手机系统更新速度比PC快得多；基本使用H5、C3，兼容问题小。</p> <h2 id="视口"><a href="#视口" class="header-anchor">#</a> 视口</h2> <ul><li>分辨率、ppi，分辨率指的是像素发光点的数量，一个像素发光点有三种颜色（红绿蓝三原色，三种颜色的亮度不同形成了屏幕上不同的颜色）；</li> <li>像素发光点的大小是不一样的，引伸出PPI的概念，PPI指的是：pixels per inch，即每英寸所拥有的像素数目，相同尺寸的数目，像素数越多，分辨率越高；</li> <li>视口宽度，可以看<strong>控制台</strong>移动web模式。</li></ul> <table><thead><tr><th style="text-align:center;">视口</th> <th style="text-align:center;">品牌</th></tr></thead> <tbody><tr><td style="text-align:center;">320px</td> <td style="text-align:center;">iphone5</td></tr> <tr><td style="text-align:center;">360px</td> <td style="text-align:center;">华为P9，小米5，vivo 6，oppo R7s，360 N4s手机中国的国产手机辜负了乔帮主的好意，出厂的时候不认真进行调教，一律都是360，实际上不合理。</td></tr> <tr><td style="text-align:center;">375px</td> <td style="text-align:center;">iphone6</td></tr> <tr><td style="text-align:center;">414px</td> <td style="text-align:center;">iphone6p</td></tr></tbody></table> <p>meta设置:</p> <div class="language-html extra-class"><pre class="language-html"><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; id=&quot;viewport”&gt;
width=device-width  约束视口为出厂视口
initial-scale=1.0  默认视口1.0倍
minimum-scale=1.0 允许最小的视口1.0倍
maximum-scale=1.0 允许最大的视口1.0倍
user-scalable=no   不允许用户缩放视口
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>视口的最终目的：屏蔽手机的尺寸、像素密度差异，让任何手机中的文字看起来一样大；其中的道理：手机屏幕大的，看到的东西越多。手机中图片一般要缩小2-3倍，这样可以充分利用手机的高清屏幕，让图片更清晰。因为视口为360的手机，如果真实分辨率为1080的，视口的1个像素，实际上对应3个物理像素点，这样图片更加清晰。</p></div> <h2 id="移动端布局-百分比布局"><a href="#移动端布局-百分比布局" class="header-anchor">#</a> 移动端布局（百分比布局）</h2> <p>移动WEB没有版心，主要因为手机屏幕小，并且浏览器app一般都是撑满的；通常为了美观也只是在做几像素的margin或者padding。为了适应不同尺寸的手机的视口宽度，便于制作移动web页面，尺寸不再写固定的像素值，而是进行百分比布局。</p> <blockquote><p>  百分比布局基础，用百分比来设置宽度、高度（绝大多数高度可以写为具体的像素值，因为绝大多数手机使用是纵向滑动的）、padding、margin的布局方式，叫做流式布局，也叫做弹性布局；</p></blockquote> <blockquote><p>   基础：宽度、padding参考的是父亲的内容宽度（没设置box-sizing：border-box，就是width；设置box-sizing：border-box的就是父盒子的width减去padding、border宽度后，可以书写内容的宽度），而不是父亲的padding；border不能用百分比写；之前的盒模型中，一个盒子实际占有的宽度为width+两条border+加两边的padding，可以说，都是外扩的，要想保持所占大小不变，增加padding或者border就必须进行内减。</p></blockquote> <p>边框带来的麻烦，因为边框不能设置百分比，所以在分配父盒子的宽度的时候，子盒子设置了边框，就会变得非常麻烦；但是CSS3中增加了calc属性函数，但是兼容性不好。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 2px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>CSS3中新的盒模型，CSS3中增加了box-sizing:border-box;（之前的相当于默认box-sizing:content-box）；使用了box-sizing:border-box的盒模型，中的width就是这个盒模型实际占有的宽度；进行设置border、padding的操作，相当于内减的了（可以书写内容的区域减小了），不用再考虑边框带来的麻烦。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 10px solid red<span class="token punctuation">;</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 20px solid red<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 40px solid red<span class="token punctuation">;</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 30px solid red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>  移动端可能出现的问题：iOS中transition兼容；防抖动设置http://web.jobbole.com/86158/；安卓手机有的版本不支持es5或者es6，恰好babel也没有转译，或出现一些问题；fixed定位问题。</p></blockquote> <h2 id="移动端常见布局"><a href="#移动端常见布局" class="header-anchor">#</a> 移动端常见布局</h2> <blockquote><p>  border-box，border来充当margin。</p></blockquote> <blockquote><p>  display：flex。CSS3中增加了rem单位，是绝对单位，表示html根元素的字号的倍数。</p></blockquote> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  // 推荐使用20px，但是不能小于12px
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>  rem具体设置：</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text/javascript<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>onresize <span class="token operator">=</span> set<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> baseWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
        <span class="token keyword">var</span> rate <span class="token operator">=</span> baseWidth <span class="token operator">/</span> <span class="token number">600</span><span class="token punctuation">;</span>    <span class="token comment">// 设计图尺寸</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">*</span> rate <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>  固比固，三个盒子并排撑满父盒子，两边的盒子是固定尺寸，中间的盒子要撑满剩余的部分。常用的做法是：使用绝对定位，固定两边的盒子，设置中间盒子的width：100%；然后给父盒子增加两边的padding来减少。中间盒子width：100%实际得到的宽度，并设置父盒子box-sizing：border-box；使用display：flex。</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>  // display: flex
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    // width: 200px;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    // flex: 1
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    // width: 200px;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="移动端调试"><a href="#移动端调试" class="header-anchor">#</a> 移动端调试</h2> <blockquote><p>  苹果，序列号注册调试用；下载debug版本APP（序列号注册了才能下载）；数据线连接手机，在同一局域网下；手机Safari，web检查器；Mac在开发中找到入口；嵌入本地的：location：‘http：//wifi分配给电脑的地址：项目端口号’。</p></blockquote> <blockquote><p>  android，电脑安装chrome并安装inspect插件；手机打开开发者模式；统一Wi-Fi或者局域网；电脑chrome浏览器输入，chrome：//inspect，在devices中找到设备，点击inspect；嵌入本地的：location：‘http：//wifi分配给电脑的地址：项目端口号’。</p></blockquote> <h2 id="苹果端常用meta和link"><a href="#苹果端常用meta和link" class="header-anchor">#</a> 苹果端常用meta和link</h2> <blockquote><p>  以携程手机页面( m.ctrip.com )为例：</p></blockquote> <img src="http://wx3.sinaimg.cn/mw690/e992a6b1gy1fuzkrgo6rzj20j608zab2.jpg" width="400" align="center"> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <blockquote><p>  纯数字或者纯英文字母的标签不会自适应宽度：设置word-break：break-all可以解决。</p></blockquote> <blockquote><p>   iOS中fixed问题。</p></blockquote> <h2 id="相关工具库"><a href="#相关工具库" class="header-anchor">#</a> 相关工具库</h2> <blockquote><p>  hammer.js，一个优秀的、轻量级的触屏设备手势库!</p></blockquote> <h2 id="触摸事件"><a href="#触摸事件" class="header-anchor">#</a> 触摸事件</h2> <blockquote><p>  手机端最为主要的事件组包含三个事件：开始触摸：touchstart，手指触摸屏幕一瞬间发生的，如果多个手指触摸，每个手指摸得时候都会触发；手指移动：touchmove，区别于其他事件，只要移动就会“无缝”连续触发；触摸结束：touchend，同理，手指离开屏幕的一瞬间发生，如果多个手指离开，每个手指也都会触发该事件；三个事件比较简单，难点在于三个事件的相互配合；</p></blockquote> <blockquote><p>  手机端依赖这三个事件的效果模型：拖拽、轮播图、抛掷、滑动拖出。</p></blockquote> <blockquote><p>  绑定方法必须用DOM2级方法来绑定监听：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>“事件类型&quot;，<span class="token keyword">function</span>（event）｛｝，<span class="token boolean">true</span><span class="token punctuation">)</span>，添加到捕获阶段；
</code></pre></div><blockquote><p>  触发事件的event对象（手指）中有一个属性叫做touches，是一个数组，里面封装了每个在屏幕上的手指的各种信息，包括手指的位置、粗细、力度（只有iPhone7支持），获取手指：event.touches[0]；还有一个changedTouches属性，也是一个数组。表示touchend，离开屏幕的手指的信息。先离开的手指，先被push进数组。</p></blockquote> <blockquote><p>  手机端额click事件和a标签：手机端也有click事件，但是click事件要比touchstart事件晚触发200ms到300ms左右，因为手机浏览器有默认的一些手指快捷操作，比如双击放大视口。用click事件的元素，点击之后浏览器会等待200ms到300ms，看你有没有再次点击，如果这个事件段内，再次点击则触发浏览器默认操作，且click事件不会被触发；如果没有再次点击，才触发click事件。相比之下，touchstart不会等待，只要碰到元素，就瞬间触发touchstart事件。</p></blockquote> <blockquote><p>  特别注意，在移动端web，a标签的执行也类似click事件，延迟200-300ms触发；所以手机web中一般不用a标签来跳转链接，而是给元素添加touchstart事件来跳转。具体方法就是:让元素携带data-herf自定义属性，属性值为要跳转的网址；用JS批量给携带data-herf标签的元素批量添加touchstart事件，让window.location等于元素携带的网址（data-herf属性的属性值）。注意，如果是绝对路径要加 http://。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> all <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[data-herf]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> all<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    all<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'tochstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-herf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="拖拽"><a href="#拖拽" class="header-anchor">#</a> 拖拽</h2> <blockquote><p>  拖拽是非常重要的事件的组合，PC端的拖拽：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>box<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        …    <span class="token comment">// 事件内容</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
box<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>  PC端的鼠标拖拽和移动端的触摸拖拽，最重要的不同是：手指移动一定是手指在屏幕上才发生的，所以touchmove事件不需要写在touchstart事件里；以下的方式可以实现拖拽：参照点定到页面左上角；</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> deltaX<span class="token punctuation">,</span> deltaY<span class="token punctuation">;</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thisFinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    deltaX <span class="token operator">=</span> thisFinger<span class="token punctuation">.</span>clientX <span class="token operator">-</span> x<span class="token punctuation">;</span>
    deltaY <span class="token operator">=</span> thisFinger<span class="token punctuation">.</span>clientY <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thisFinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> thisFinger<span class="token punctuation">.</span>clientX <span class="token operator">-</span> deltaX<span class="token punctuation">;</span>
    y <span class="token operator">=</span> thisFinger<span class="token punctuation">.</span>clientY <span class="token operator">-</span> deltaY<span class="token punctuation">;</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>  使用CSS3的transform属性的translate（，）属性值(top、left属性的效率，不如transform属性的效率。)，先形影分离，再真正移动。有人研究过，top、left属性的效率，不如transform属性的效率。所以要进行移动什么东西，多考虑transform属性。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> docuemnt<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;#img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> startX<span class="token punctuation">,</span> startY<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">;</span>
<span class="token keyword">var</span> nowLeft <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>nowTop <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thefinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    startX <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    startY <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thefinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dx <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
    dy <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> dx <span class="token operator">+</span> <span class="token string">&quot;px, &quot;</span> <span class="token operator">+</span> dy <span class="token operator">+</span> <span class="token string">&quot;px)&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    nowLeft <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
    nowTop <span class="token operator">+=</span> dy<span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> nowLeft <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> nowTop <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>  增量法：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> docuemnt<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;#img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> startX<span class="token punctuation">,</span> startY<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thefinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    startX <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    startY <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> thefinger <span class="token operator">=</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dx <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startX<span class="token punctuation">;</span>
    dy <span class="token operator">=</span> thefinger<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startY<span class="token punctuation">;</span>
    <span class="token comment">// 每一次都变，增量法；</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> dx <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> dy <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 更新起点；</span>
    x <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
    y <span class="token operator">+=</span> dy<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="惯性抛掷"><a href="#惯性抛掷" class="header-anchor">#</a> 惯性抛掷</h2> <blockquote><p>  拖拽，但是惯性抛掷不是马上停下来，而是慢慢停下来。主要的制作方法有两种：非常简单：添加overflow-y: scroll; 很智能的就把移除的内容就变成可以滑动、抛掷、惯性的了；难的方法：自己写函数模拟，惯性；惯性的特点：速度衰减；滑动力度；滑动距离的判断；</p></blockquote> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">nav</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="缓冲easeing"><a href="#缓冲easeing" class="header-anchor">#</a> 缓冲easeing</h2> <p>CSS3中的transition属性的属性值的第三个参数就是描述的缓冲：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">transition</span><span class="token punctuation">:</span> all 2s linear 0s<span class="token punctuation">;</span>
</code></pre></div><p>在这些缓冲可以在JS中来推导和模拟，用定时器设置多少帧走多少路程，每帧走的长度不同就会出现不同的效果。总帧数和总路程恒定不变，不同的效果达到相同终点的时间是一样的。典型的如&quot;tbcd函数”:</p> <blockquote><ul><li>假设帧编号为t（本例中t自增），t是time</li> <li>起点成为b（本例中b为100），b是begin</li> <li>总变化量c（本例中c为700），c是change</li> <li>总帧数d（本例中d为100），d是duration</li></ul></blockquote> <blockquote><ul><li>可以在chrome控制台或者专业网站，找到对应的贝塞尔曲线值。</li></ul></blockquote> <h2 id="手机滚屏幕"><a href="#手机滚屏幕" class="header-anchor">#</a> 手机滚屏幕</h2> <blockquote><p>  loading界面，所有页面的图片都加载后，在展示给用户看。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/index/1.html/3.canvas.html" class="prev">
        3.canvas
      </a></span> <span class="next"><a href="/index/2.css/1.css基础.html">
        1.css基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/index/assets/js/app.9915e749.js" defer></script><script src="/index/assets/js/2.6552fd95.js" defer></script><script src="/index/assets/js/19.048b44c9.js" defer></script>
  </body>
</html>
